---
title: "USVI Coral Sampling Data Exploration"
author: "Emily Sesno"
output:
  html_document:
    code_folding: hide
    toc: yes
    toc_depth: 6
    toc_float: yes
  pdf_document:
    keep_tex: yes
editor_options: 
  chunk_output_type: console
---

```{r setup, message=FALSE, warning=FALSE, echo=FALSE}
rm(list=ls(all=TRUE))

results <- read.csv("Data/Genotype_Samples_2022.csv", header=T, na.strings="na")

library("plyr") 
library("dplyr")
library("tidyverse")
library("knitr")
library("tidyr")

library("janitor") #allows to group by Location (group_by wasn't working properly)

```

# Species Counts by Location
```{r data explore, echo=FALSE}

spcount <- 
  results %>% 
  select("VialID", "Species") %>% 
  separate(col=VialID, into=c('Location', 'SampNum'), sep='_') %>% 
  drop_na(Species) %>% 
  tabyl(Species, Location)

spcount

```

# GPS Data Exploration
```{r}

#create new data frame gpsUpdate that accurately represents the time for correct time zone. Will use this to autofind corresponding times in our metadata sheet

gps <- read.csv("Data/GPS_13May.csv", header=T, na.strings="NA", stringsAsFactors=FALSE)

gpsUpdate <- 
  gps %>% 
    select("lat", "lon", "time") %>% 
    mutate(time=str_replace_all(time,"[:punct:]","-")) %>% 
    separate(col=time, into=c('Year', 'Month', "DayHour", "Min","Sec"),
             sep='-') %>% 
    separate(col=DayHour, into=c('Day', 'Hour'), sep='T') %>% 
    select("lat","lon","Year","Month","Day","Hour","Min") %>% 
    unite(col="Date", c("Year","Month","Day"), sep = "-") %>% 
    mutate(Hour = as.numeric(Hour), Min=as.numeric(Min)) %>% 
    mutate(Hour=Hour-3) %>% 
    unite(col="Time", c("Hour","Min"), sep=':') %>%
    mutate(Date=strptime(Date, format = "%Y-%m-%d"))

str(gpsUpdate)
    






```

